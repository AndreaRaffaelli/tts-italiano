---
- name: Create data processing directories
  ansible.builtin.file:
    path: "/home/{{ ansible_user }}/{{ item }}"
    state: directory
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"
    mode: '0755'
  become: true
  become_user: "{{ ansible_user }}"
  loop:
    - "data/raw"
    - "data/processed"
    - "data/cache"
    - "outputs"
    - "logs"

- name: Display completion message
  ansible.builtin.debug:
    msg: |
      ğŸ‰ CPU Preprocessing Environment Setup Completed!

      ğŸ“ Virtual environment created at: {{ venv_path }}
      ğŸ“Š Environment type: CPU-only for data preprocessing

      ğŸš€ To activate the environment:
         source {{ venv_path }}/bin/activate
         # OR
         ./activate_speecht5_preprocess.sh
         # OR
         speecht5pp  (alias added to .bashrc)

      ğŸ” To test the setup:
         cd ~/speecht5_preprocessing
         python test_setup.py

      ğŸ¤— Hugging Face Authentication:
      {% if local_hf_token.stat.exists %}
         âœ… Token copied from local host and configured
      {% else %}
         âš ï¸  Please run: hf auth login (to authenticate with Hugging Face)
      {% endif %}

      ğŸ“ Project structure created:
         ~/speecht5_preprocessing/  (processing scripts)
         ~/data/raw/               (raw input data)
         ~/data/processed/         (processed data output)
         ~/data/cache/             (temporary processing cache)
         ~/outputs/                (final outputs)
         ~/logs/                   (processing logs)

      ğŸ’¡ Key features for preprocessing:
         ğŸ”¹ PyTorch CPU version (optimized for preprocessing)
         ğŸ”¹ Audio processing libraries (soundfile, librosa)
         ğŸ”¹ Data manipulation tools (datasets, pandas, numpy)
         ğŸ”¹ Scientific computing (scipy, scikit-learn)
         ğŸ”¹ Visualization tools (matplotlib, seaborn)

      ğŸš€ Ready for SpeechT5 data preprocessing tasks!
